<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Phishing Simulator ‚Äì Level 1: Social Engineering</title>
  <style>
    :root {
      --bg: #0f172a;           /* slate-900 */
      --panel: #111827;        /* gray-900 */
      --panel-2: #0b1220;      /* darker tint */
      --text: #e5e7eb;         /* gray-200 */
      --muted: #9ca3af;        /* gray-400 */
      --accent: #22c55e;       /* green-500 */
      --warn: #f59e0b;         /* amber-500 */
      --danger: #ef4444;       /* red-500 */
      --bubble-me: #1f2937;    /* gray-800 */
      --bubble-them: #0ea5e9;  /* sky-500 */
      --shadow: 0 8px 24px rgba(0,0,0,.35);
      --radius: 18px;
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }

    body {
      margin: 0; background: linear-gradient(180deg, var(--bg), #060913 60%);
      color: var(--text); font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      display: grid; place-items: center; padding: 24px;
    }

    .phone {
      width: min(420px, 100%);
      height: 780px;
      background: linear-gradient(180deg, var(--panel), var(--panel-2));
      border-radius: 36px; box-shadow: var(--shadow);
      border: 1px solid rgba(255,255,255,.06);
      display: grid; grid-template-rows: 64px 1fr auto 64px; overflow: hidden;
    }

    .statusbar {
      display: flex; align-items: center; justify-content: space-between;
      padding: 0 18px; border-bottom: 1px solid rgba(255,255,255,.06);
      background: rgba(255,255,255,0.02);
    }
    .statusbar .title { display: flex; align-items: center; gap: 12px; }
    .avatar { width: 34px; height: 34px; border-radius: 50%; background: #0ea5e9; display: grid; place-items: center; font-weight: 700; color: white; }
    .subtitle { font-size: 12px; color: var(--muted); }

    .chat {
      padding: 16px; overflow: auto; scroll-behavior: smooth; background: radial-gradient(1200px 600px at 50% -10%, rgba(255,255,255,.04), transparent 60%);
    }

    .msg { max-width: 85%; margin: 8px 0; display: inline-block; position: relative; }
    .from-them { background: var(--bubble-them); color: #071018; border-radius: var(--radius) var(--radius) var(--radius) 8px; padding: 12px 14px; }
    .from-me { background: var(--bubble-me); border-radius: var(--radius) var(--radius) 8px var(--radius); padding: 12px 14px; margin-left: auto; }

    .timestamp { display: block; font-size: 11px; color: var(--muted); margin-top: 6px; }

    .choices {
      display: grid; gap: 10px; padding: 16px; border-top: 1px solid rgba(255,255,255,.06);
      background: rgba(255,255,255,0.03);
    }

    button.choice {
      appearance: none; border: 1px solid rgba(255,255,255,.12); background: #111827; color: var(--text);
      padding: 12px 14px; border-radius: 14px; font-size: 14px; text-align: left; cursor: pointer; transition: transform .04s ease, background .2s ease, border-color .2s ease; box-shadow: 0 4px 14px rgba(0,0,0,.25);
    }
    button.choice:hover { background: #0f172a; }
    button.choice:active { transform: translateY(1px); }
    button.choice[disabled] { opacity: .5; cursor: not-allowed; }

    .footer {
      display: flex; align-items: center; justify-content: space-between; padding: 0 16px; border-top: 1px solid rgba(255,255,255,.06);
      background: rgba(255,255,255,0.02);
      gap: 8px;
    }

    .score { font-variant-numeric: tabular-nums; }
    .pill { padding: 6px 10px; border-radius: 999px; font-size: 12px; border: 1px solid rgba(255,255,255,.12); color: var(--muted); }

    .badge { font-size: 12px; padding: 4px 8px; border-radius: 999px; font-weight: 700; }
    .ok { background: rgba(34,197,94,.15); color: #34d399; border: 1px solid rgba(34,197,94,.4); }
    .warn { background: rgba(245,158,11,.15); color: #fbbf24; border: 1px solid rgba(245,158,11,.4); }
    .bad { background: rgba(239,68,68,.15); color: #fca5a5; border: 1px solid rgba(239,68,68,.4); }

    .hidden { display: none !important; }

    /* Accessible focus styles */
    :focus-visible { outline: 2px solid #60a5fa; outline-offset: 2px; }
  </style>
</head>
<body>
  <main class="phone" role="application" aria-label="Phishing Simulator ‚Äì Level 1: Social Engineering">
    <header class="statusbar" aria-live="polite">
      <div class="title">
        <div class="avatar" aria-hidden="true">IT</div>
        <div>
          <div style="font-weight:700">IT Support</div>
          <div class="subtitle">online ‚Ä¢ verifying setup‚Ä¶</div>
        </div>
      </div>
      <div class="pill" id="levelLabel">Level 1</div>
    </header>

    <section class="chat" id="chat" aria-live="polite">
      <!-- Seed message from attacker -->
      <div class="msg from-them" role="text">
        Hello, welcome aboard! I‚Äôm from the IT department. Just finishing up your account setup. Could you share your <strong>username and password</strong> so I can activate your email?
        <span class="timestamp">now</span>
      </div>
    </section>

    <section class="choices" id="choices" aria-label="Choose your response">
      <button class="choice" data-outcome="bad" data-points="-50" data-reply="Sure, my username is divya.t and my password is P@ss1234." data-feedback="Oh no! You handed over your credentials. The attacker now has access to your email and files." aria-describedby="helper1">
        ‚úÖ Sure, here are my credentials.
      </button>
      <small id="helper1" class="subtitle">(This is a trap‚ÄîIT will never ask for your password.)</small>

      <button class="choice" data-outcome="ok" data-points="100" data-reply="Sorry, I can‚Äôt share my password. Can you confirm this request with HR or my manager first?" data-feedback="Great call! IT will never ask for your password over chat. Always verify first.">
        üõ°Ô∏è I won‚Äôt share that. Please verify via HR/manager.
      </button>

      <button class="choice" data-outcome="warn" data-points="50" data-reply="[User ignored the message.]" data-feedback="Ignoring kept you safe, but reporting would help the security team respond.">
        üö´ Ignore the message.
      </button>
    </section>

    <footer class="footer">
      <div class="pill score" id="score" aria-live="polite">Score: 0</div>
      <div class="pill" id="resultPill">Status: ‚Äî</div>
      <button id="resetBtn" class="pill" title="Restart level">Reset</button>
    </footer>
  </main>

  <script>
    (function() {
      const chat = document.getElementById('chat');
      const choices = document.getElementById('choices');
      const scoreEl = document.getElementById('score');
      const resultPill = document.getElementById('resultPill');
      const resetBtn = document.getElementById('resetBtn');
      let score = 0;

      function addMessage(text, from = 'me') {
        const div = document.createElement('div');
        div.className = 'msg ' + (from === 'me' ? 'from-me' : 'from-them');
        div.innerHTML = `${text}<span class="timestamp">just now</span>`;
        chat.appendChild(div);
        chat.scrollTop = chat.scrollHeight;
      }

      function setStatus(type, extra = '') {
        const map = { ok: ['ok','Correct'], warn: ['warn','Safe'], bad: ['bad','Compromised'] };
        const [cls, label] = map[type] || ['warn','‚Äî'];
        resultPill.className = 'pill badge ' + cls;
        resultPill.textContent = `Status: ${label}${extra ? ' ‚Äì ' + extra : ''}`;
      }

      function lockChoices() {
        [...choices.querySelectorAll('button.choice')].forEach(b => b.disabled = true);
      }

      function unlockChoices() {
        [...choices.querySelectorAll('button.choice')].forEach(b => b.disabled = false);
      }

      choices.addEventListener('click', (e) => {
        const btn = e.target.closest('button.choice');
        if (!btn) return;
        if (btn.disabled) return;

        const reply = btn.getAttribute('data-reply');
        const feedback = btn.getAttribute('data-feedback');
        const outcome = btn.getAttribute('data-outcome');
        const points = parseInt(btn.getAttribute('data-points'), 10) || 0;

        // Player reply
        addMessage(reply, 'me');

        // Score & status
        score += points;
        scoreEl.textContent = `Score: ${score}`;
        setStatus(outcome);

        // Attacker/system feedback after a short delay
        lockChoices();
        setTimeout(() => {
          let badge = '';
          if (outcome === 'ok') badge = '<span class="badge ok">+100</span> ';
          if (outcome === 'warn') badge = '<span class="badge warn">+50</span> ';
          if (outcome === 'bad') badge = '<span class="badge bad">-50</span> ';

          addMessage(`${badge}${feedback}`, 'them');

          // End-of-level tip
          setTimeout(() => {
            if (outcome === 'ok') {
              addMessage('Tip: IT will never ask for your password. Always verify via official channels.', 'them');
            } else if (outcome === 'warn') {
              addMessage('Tip: Good instinct. Next time, also report suspicious messages to security.', 'them');
            } else {
              addMessage('Tip: If you shared credentials by mistake, change your password and notify security immediately.', 'them');
            }
          }, 900);
        }, 600);
      });

      resetBtn.addEventListener('click', () => {
        // reset chat
        chat.innerHTML = `
          <div class="msg from-them" role="text">
            Hello, welcome aboard! I‚Äôm from the IT department. Just finishing up your account setup. Could you share your <strong>username and password</strong> so I can activate your email?
            <span class="timestamp">now</span>
          </div>`;
        // reset score/status
        score = 0;
        scoreEl.textContent = 'Score: 0';
        resultPill.className = 'pill';
        resultPill.textContent = 'Status: ‚Äî';
        unlockChoices();
      });

      // Keyboard support: first choice on Enter
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
          const first = choices.querySelector('button.choice:not([disabled])');
          if (first) first.focus();
        }
      });
    })();
  </script>
</body>
</html>
